"0","#Libraries"
"0","library(tidyverse)"
"0","library(haven)"
"0","library(modelr)"
"0","#Parameters"
"0","els_t1_file <- "
"0","  ""~/Box/lucy_king_files/ELS/stress_data/data/Best_ELS T1 Integrated Stress Interview_Panel Ratings_Copy 1._20180711.sav"""
"0","els_t2_file <- "
"0","  ""~/Box/lucy_king_files/ELS/stress_data/data/ELS T2 Integrated Stress Interview_Panel Ratings_Copy 1 USE_1._20180711.sav"""
"0","lca_class_t1_file <- "
"0","  ""~/Box/lucy_king_files/ELS/stress_data/data/els_t1_lca_class.csv"""
"0","## Functions"
"0","spread_els_data <- function(data, rating) {"
"0","  "
"0","  rating <- enquo(rating)"
"0","  "
"0","  data %>% "
"0","  select("
"0","    ELS_ID,"
"0","    event_domain_re,"
"0","    !! rating"
"0","  ) %>% "
"0","  group_by(ELS_ID, event_domain_re) %>% "
"0","  filter("
"0","    !! rating == max("
"0","      !! rating, na.rm = TRUE"
"0","    )"
"0","  ) %>% "
"0","  distinct("
"0","    event_domain_re, "
"0","    !! rating"
"0","  ) %>% "
"0","  gather(key1, value, !! rating) %>% "
"0","  unite(key2, event_domain_re, key1, sep = ""_"") %>% "
"0","  spread(key2, value) %>% "
"0","  ungroup()"
"0","  "
"0","}"
